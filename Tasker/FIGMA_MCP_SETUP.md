# Настройка MCP для работы с Figma

## Требования

1. **Подписка на Figma**: Необходима подписка с доступом к Dev Mode MCP Server (Dev или Full seat на планах Professional, Organization или Enterprise)
2. **Настольное приложение Figma**: MCP Server недоступен в веб-версии
3. **Node.js**: Для запуска MCP серверов через npx

## Шаги настройки

### 1. Включите Dev Mode MCP Server в Figma

1. Откройте настольное приложение Figma
2. Перейдите в меню **Figma** > **Preferences**
3. Найдите опцию **Enable Dev Mode MCP Server** и включите её
4. После включения должно появиться сообщение: "Server is enabled and running"

### 2. Сгенерируйте персональный токен доступа Figma

1. В Figma перейдите в **Profile** > **Settings**
2. Перейдите в раздел **Security**
3. Сгенерируйте новый персональный токен доступа
4. **ВАЖНО**: Сохраните токен в безопасном месте, он больше не будет показан

### 3. Настройте MCP-клиент

#### Для Cursor:
1. Скопируйте содержимое `mcp.json` в конфигурацию Cursor
2. Замените `YOUR_FIGMA_API_KEY_HERE` на ваш реальный токен доступа

#### Для Claude Desktop:
1. Откройте **Settings** > **Developer** > **Edit Config**
2. Скопируйте содержимое `claude_desktop_config.json`
3. Замените `YOUR_FIGMA_API_KEY_HERE` на ваш реальный токен доступа

### 4. Установите необходимые пакеты

Выполните следующие команды в терминале:

```bash
# Для MCP сервера Figma
npm install -g figma-developer-mcp
```

**Примечание:** Пакет также можно использовать без глобальной установки через `npx`.

### 5. Тестирование интеграции

После настройки вы можете тестировать интеграцию:

1. Откройте файл в Figma
2. Выберите элемент дизайна
3. В MCP-клиенте (Cursor/Claude) попросите:
   - "Сгенерируй мой выбор в Figma в SwiftUI"
   - "Покажи информацию о выбранном элементе в Figma"
   - "Экспортируй выбранный элемент как код"

## Возможности интеграции

После настройки MCP для Figma вы сможете:

- **Генерировать SwiftUI код** на основе дизайна в Figma
- **Получать информацию** о выбранных элементах (размеры, цвета, стили)
- **Синхронизировать дизайн-токены** с вашим проектом
- **Автоматически обновлять** цветовые схемы и стили
- **Экспортировать ассеты** напрямую в проект

## Безопасность

⚠️ **ВАЖНО**: Никогда не коммитьте файлы конфигурации с реальными токенами доступа в систему контроля версий!

Добавьте следующие строки в ваш `.gitignore`:

```
mcp.json
claude_desktop_config.json
.env
*.env
```

## Поддержка

При возникновении проблем:

1. Убедитесь, что у вас есть необходимые права доступа в Figma
2. Проверьте, что токен доступа действителен
3. Убедитесь, что используете настольное приложение Figma
4. Проверьте логи MCP-клиента для диагностики ошибок

## Полезные команды

```bash
# Проверить установленный MCP сервер
npx figma-developer-mcp --help

# Тестировать соединение с Figma API
curl -H "X-Figma-Token: YOUR_TOKEN" https://api.figma.com/v1/me

# Запустить MCP сервер для тестирования (с вашим токеном)
npx figma-developer-mcp --figma-api-key=YOUR_FIGMA_API_KEY --stdio
```

